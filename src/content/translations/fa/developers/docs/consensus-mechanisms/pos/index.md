---
title: اثبات سهام (PoS)
description: توضیحی درباره‌ی پروتکل اجماع اثبات سهام و نقش آن در اتریوم.
lang: fa
sidebar: true
---

Proof-of-stake (PoS) underlies Ethereum's [consensus mechanism](/developers/docs/consensus-mechanisms/). Ethereum switched on its proof-of-stake mechanism in 2022 because it is more secure, less energy-intensive, and better for implementing new scaling solutions compared to the previous [proof-of-work](/developers/docs/consensus-mechanisms/pow) architecture.

## پیش‌نیازها {#prerequisites}

برای درک بهتر این صفحه،‌ ما پیشنهاد می‌کنیم ابتدا [مکانیزم‌های اجماع](/developers/docs/consensus-mechanisms/) را بخوانید.

## اثبات سهام (PoS) چیست؟ {#what-is-pos}

Proof-of-stake underlies certain [consensus mechanisms](/developers/docs/consensus-mechanisms/) used by blockchains to achieve distributed consensus. در اثبات کار، استخراج‌گرها اثبات می‌کنند که با مصرف انرژی سرمایه‌ای تحت ریسک دارند. Ethereum uses proof-of-stake, where validators explicitly stake capital in the form of ETH into a smart contract on Ethereum. This staked ETH then acts as collateral that can be destroyed if the validator behaves dishonestly or lazily. اعتبارسنج موظف است بررسی کند که بلوک‌هایی که در شبکه پخش می‌شوند معتبر هستند و هر از گاهی خود بلوک جدیدی ساخته و در شبکه پخش کند.

Proof-of-stake comes with a number of improvements to the now-deprecated proof-of-work system:

- بازده انرژی بهتر - هیچ نیازی به استفاده از انرژی بسیار زیاد محاسبات اثبات کار نیست
- موانع کمتر برای ورود، سخت‌افزار موردنیاز کمتر – برای برخورداری از شانس ساختن بلوک‌های جدید، نیازی به سخت‌افزار عجیب و خاص نیست
- کاهش ریسک تمرکز - اثبات سهام باید به تعداد گره‌های بیشتری در حال برقراری امنیت شبکه بیانجامد
- به دلیل نیاز به انرژی کمتر، تولید اتر کمتری برای تشویق شرکت‌کننده‌ها نیاز است
- جریمه‌های اقتصادی برای رفتار اشتباه باعث می شود که حملات مدل 51% به شکل نمایی برای حمله‌کننده به نسبت اثبات کار پرهزینه شوند
- در صورتی که حمله‌ی 51% در شرف فائق آمدن بر دفاع‌های رمزارزی-اقتصادی بود، جامعه می‌تواند به بازیابی اجتماعی یک زنجیره‌ی صادق متوسل شود.

## اعتبارسنج‌ها {#validators}

برای مشارکت‌کردن به عنوان یک اعتبارسنج، کاربر باید 32 اتر را به یک قرارداد سپرده، سپرده‌گذاری کند و سه نرم‌افزار متنوع جدا از هم را اجرا کند: یک کلاینت اجرا، یک کلاینت اجماع، و یک اعتبارسنج. On depositing their ETH, the user joins an activation queue that limits the rate of new validators joining the network. زمانی که اعتبارسنج فعال شد، از همتایان درون شبکه‌ی اتریوم بلوک‌های جدید را دریافت می‌کند. تراکنش‌هایی که درون بلوک نوشته می‌شوند دوباره اجرا می‌شوند و امضای بلوک بررسی می‌شود تا از معتبربودن بلوک به اطمینان برسیم. سپس اعتبارسنج یک رای را (که تصدیق نامیده می‌شود) بر روی شبکه برای آن بلوک ارسال می‌کند.

در حالی که در اثبات کار، زمان بلوک‌ها توسط سختی استخراج مشخص می‌شود، در اثبات سهام نرخ ثبت بلوک ثابت است. در اتریوم اثبات سهام زمان به اسلات‌ها (۱۲ ثانیه) و ایپاک‌ها (۳۲ اسلات) تقسیم می‌شود. یک اعتبارسنج به طور تصادفی برای پیشنهادکننده‌ی بلوک در هر اسلات انتخاب می‌شود. این اعتبارسنج مسئول ساختن بلوک‌های جدید و فرستادن آن به دیگر گره‌های شبکه است. همچنین در هر اسلات، یک کمیته از اعتبارسنج‌ها به طور تصادفی انتخاب می‌شوند، که رای‌های آن‌ها برای معتبربودن بلوک پیشنهاد‌شده استفاده می‌شود.

## قطعیت {#finality}

A transaction has "finality" in distributed networks when it's part of a block that can't change without a significant amount of ETH getting burned. در اتریومِ اثبات سهام، این موضوع با استفاده از بلوک‌های «نقطه‌ی بررسی» مدیریت می‌شود. اولین بلوک در هر ایپوک یک نقطه‌ی بررسی است. اعتبارسنج‌ها به جفت نقطه‌های بررسی که معتبر می‌دانند رأی می‌دهند. If a pair of checkpoints attracts votes representing at least two-thirds of the total staked ETH, the checkpoints are upgraded. هر کدام که متأخرتر باشد (هدف) «موجه» در نظر گرفته می‌شود. آن یکی که قدیمی‌تر است فی‌الواقع موجه در نظر گرفته شده است چون «هدف» ایپوک قبلی بوده است. حالا وضعیت آن به «نهایی‌شده» ارتقا یافته است. To revert a finalized block, an attacker would commit to losing at least one-third of the total supply of staked ETH. The exact reason for this is explained in this [Ethereum Foundation blog post](https://blog.ethereum.org/2016/05/09/on-settlement-finality/). از آنجایی که نهایی شدن نیاز به اکثریت دو سوم دارد، مهاجم می‌تواند از طریق رأی دادن با یک‌سوم کل سهام، از نهایی شدن شبکه جلوگیری کند. سازوکاری برای دفاع در برابر این موضوع وجود دارد: [نشت عدم فعالیت](https://arxiv.org/pdf/2003.03052.pdf). این سازوکار هر زمان که زنجیره برای بیش از چهار ایپوک نتواند نهایی شود، فعال می‌شود. The inactivity leak bleeds away the staked ETH from validators voting against the majority, allowing the majority to regain a two-thirds majority and finalize the chain.

## امنیت اقتصاد رمزارز محور {#crypto-economic-security}

اجرای اعتبارسنج یک تعهد است. انتظار می‌رود اعتبارسنجْ سخت‌افزار و اتصال کافی به اینترنت را برای مشارکت در اعتبارسنجی بلوک و پیشنهاد حفظ کند. In return, the validator is paid in ETH (their staked balance increases). از سوی دیگر، شرکت به‌عنوان اعتبارسنج، راه‌های جدیدی را برای حمله‌ی کاربران به شبکه با هدف حصول منافع شخصی یا خرابکاری باز می‌کند. To prevent this, validators miss out on ETH rewards if they fail to participate when called upon, and their existing stake can be destroyed if they behave dishonestly. دو رفتار اصلی وجود دارد که می‌توان آنها را غیرصادقانه در نظر گرفت: پیشنهاد چند بلوک در یک اسلات (مبهم‌سازی) و ارائه تصدیق‌های متناقض. The amount of ETH slashed depends on how many validators are also being slashed at around the same time. این را [«جریمه‌ی همبستگی»](https://arxiv.org/pdf/2003.03052.pdf) می‌نامند، و می‌تواند جزئی باشد (حدود 1% سهام برای یک اعتبارسنج منفرد که مشمول برخورد شدید شود) یا می‌تواند منجر به از بین رفتن 100% سهام اعتباردهنده شود (برخورد شدید انبوه). برخورد شدید در نیمه‌ی یک دوره‌ی خروج اجباری اعمال می‌شود که با جریمه‌ی فوری (تا 0.5 اتر) در روز 1، با جریمه‌ی همبستگی در روز 18 ادامه می‌یابد، و در نهایت، با بیرون رانده شدن از شبکه در روز 36 آغاز می‌شود. آن‌ها هر روز جریمه‌های جزئی تصدیق دریافت می‌کنند زیرا در شبکه حضور دارند اما رأی نمی‌دهند. همه‌ی این‌ها به این معنی است که یک حمله‌ی هماهنگ برای مهاجم بسیار پرهزینه خواهد بود.

## انتخاب فورک {#fork-choice}

هنگامی که شبکه به‌طور بهینه و صادقانه عمل می‌کند، تنها یک بلوک جدید در رأس زنجیره وجود دارد و همه اعتبارسنج‌ها آن را تصدیق می‌کنند. با این حال، این امکان وجود دارد که اعتبارسنج‌ها به دلیل تأخیر شبکه یا مبهم بودن پیشنهاددهنده‌ی بلوک، دیدگاه‌های متفاوتی نسبت به سر زنجیره داشته باشند. بنابراین، کلاینت‌های اجماع به یک الگوریتم نیاز دارند تا تصمیم بگیرند کدام‌یک را ترجیح دهند. الگوریتم مورد استفاده در اثبات سهام اتریوم [LMD-GHOST](https://arxiv.org/pdf/2003.03052.pdf) نام دارد و با شناسایی فورکی که دارای سنگین‌وزن‌ترین تصدیق در تاریخچه‌ی آن است کار می‌کند.

## اثبات سهام و امنیت {#pos-and-security}

خطر حمله [51%](https://www.investopedia.com/terms/1/51-attack.asp) همچنان در مورد اثبات سهام وجود دارد، همان‌طور که در اثبات کار وجود دارد، اما برای مهاجمان حتی از این هم خطرناک‌تر است. A attacker would need 51% of the staked ETH. سپس می‌توانستند از گواهی‌های خود استفاده کنند تا اطمینان حاصل کنند که فورک ترجیحی آنها دارای بیشترین تعداد تصدیق‌ها است. «وزن» تصدیق‌های انباشته‌شده همان چیزی است که کلاینت‌های اجماع برای تعیین زنجیره‌ی صحیح استفاده می‌کنند، بنابراین این مهاجم می‌تواند فورک خود را به فورک متعارف تبدیل کند. با این حال، نقطه‌ی قوت اثبات سهام نسبت به اثبات کار این است که جامعه‌ی کاربران آن از امکان تدارک ضدحمله برخوردار است. برای مثال، اعتبارسنج‌های صادق می‌توانند تصمیم بگیرند که به ساختن زنجیره‌ی اقلیت ادامه دهند و فورک مهاجم را نادیده بگیرند و در عین حال برنامه‌ها، صرافی‌ها و استخرها را به انجام همین کار تشویق کنند. They could also decide to forcibly remove the attacker from the network and destroy their staked ETH. این‌ها دفاع‌های اقتصادی قوی‌ای در برابر حمله‌ی 51% هستند.

حملات 51% فقط یکی از انواع فعالیت مخرب است. بازیگران بد می‌توانند حملات دوربرد انجام دهند (گرچه کجت قطعیت این بردار حمله را خنثی می‌کند)، «سامان‌دهی‌های» کوتاه‌برد انجام دهند (اگرچه ضرب‌الاجل‌های تقویت پیشنهاد و تصدیق تعدد این موارد را کمتر می‌کنند)، حملات برگشتی و متوازن‌گر انجام دهند (تعدد این‌ها هم تقویت پیشنهاددهنده کاهش می‌یابند، و این حملات به هر حال فقط تحت شرایط شبکه ایده‌آل نشان داده شده است) یا حملات بهمنی انجام دهند (که توسط قانون لحاظ کردن صرف آخرین پیام الگوریتم‌های انتخاب فورک خنثی می‌شود).

به‌طور کلی، اثبات سهام، به شکلی که در اتریوم پیاده‌سازی می‌شود، از نظر اقتصادی امن‌تر از اثبات کار است.

## نقاط مثبت و منفی {#pros-and-cons}

| نقاط مثبت                                                                                                                                                                                                                         | نقاط منفی                                                                        |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------- |
| سهام‌گذاریْ مشارکت افراد در تأمین امنیت شبکه و افزایش تمرکززدایی را آسان‌تر می‌کند. گره‌ی اعتبارسنج را می‌توان روی یک لپ‌تاپ معمولی اجرا کرد. استخرهای سهام‌گذاری به کاربران امکان می‌دهند بدون داشتن 32 اتریوم، سهام‌گذاری کنند. | اثبات سهام در مقایسه با اثبات کار، جوان‌تر است و کمتر مورد آزمایش قرار گرفته است |
| سهام‌گذاری غیرمتمرکزتر است. مزیت مقیاس به شکلی که برای استخراج PoW اعمال می‌شد، اعمال نمی‌شود.                                                                                                                                    | اجرای اثبات سهام پیچیده‌تر از اثبات کار است                                      |
| اثبات سهام در مقایسه با اثبات کار، امنیت بیشتری از حیث اقتصاد رمزارز ارائه می‌دهد                                                                                                                                                 | کاربران برای مشارکت در اثبات سهام اتریوم باید سه نرم‌افزار را اجرا کنند.         |
| Less issuance of new ETH is required to incentivize network participants                                                                                                                                                          |                                                                                  |

## بیشتر بخوانید {#further-reading}

- [سؤالات متداول درباره‌ی اثبات سهام](https://vitalik.ca/general/2017/12/31/pos_faq.html) _ویتالیک بوترین_
- [اثبات سهام چیست؟](https://consensys.net/blog/blockchain-explained/what-is-proof-of-stake/) _ConsenSys_
- [اثبات سهام چیست و چرا اهمیت دارد](https://bitcoinmagazine.com/culture/what-proof-of-stake-is-and-why-it-matters-1377531463) _ویتالیک بوترین_
- [ توضیحات زنجیره‌ی بیکن اتریوم 2.0 که باید اول بخوانید](https://ethos.dev/beacon-chain/) _Ethos.dev_
- [چرا اثبات سهام (نوامبر 2020)](https://vitalik.ca/general/2020/11/06/pos2020.html) _ویتالیک بوترین_
- [اثبات سهام: چگونه یاد گرفتم که سویه‌گیری خفیف را دوست داشته باشم](https://blog.ethereum.org/2014/11/25/proof-stake-learned-love-weak-subjectivity/) _ ویتالیک بوترین_
- [Proof-of-stake Ethereum attack and defense](https://mirror.xyz/jmcook.eth/YqHargbVWVNRQqQpVpzrqEQ8IqwNUJDIpwRP7SS5FXs)
- [فلسفه‌ی طراحی اثبات سهام](https://medium.com/@VitalikButerin/a-proof-of-stake-design-philosophy-506585978d51) _ویتالیک بوترین_

## موضوعات مرتبط {#related-topics}

- [اثبات کار](/developers/docs/consensus-mechanisms/pow/)
